<div class="container-fluid results">
  <div class="page">
    <div class="main-panel">
      <div class="jim-box">
        <div class="row calendar-overview">
          <div class="col-sm-12 col-md-5">
            <div class="row user-filter" ng-show="userDetails.is_trainer">
              <div class="col-xs-12 col-sm-3">
                Trainee:
              </div>
              <div class="col-xs-12 col-sm-9">
                <ui-select ng-model="user.selected" on-select="onTraineeChanged($item, $model)">
                  <ui-select-match placeholder="Select a trainee">
                    <span>{{$select.selected.full_name}}</span>
                  </ui-select-match>
                  <ui-select-choices repeat="user in users">
                    <div ng-bind-html="user.full_name"></div>
                  </ui-select-choices>
                </ui-select>
              </div>
            </div>
            <div class="row" ui-calendar="uiConfig.calendar" ng-model="calendarSources"
                 calendar="myCalendar1"></div>
          </div>
          <div class=" col-sm-12 col-md-7">
            <div ng-hide="selectedTraining">
              <div class="header">
                <h1 class="jim-title">No training selected.</h1>

                <h1 class="jim-sub-title">Select a training on the calendar.</h1>
              </div>
              <div class="separator"></div>
              <div class="box-image"></div>
            </div>
            <div ng-show="selectedTraining" id="my-workout" class="selected-regime">
              <div class="row header">
                <div promise-spinner promise="selectedTraining" class="col-xs-12 col-sm-8">
                  <h1 class="jim-title">{{selectedTraining.training.name}}</h1>
                </div>
                <div class="col-xs-12 col-sm-4">
                  <div class="overview-details-switch btn-group pull-right">
                    <label class="btn btn-primary" ng-model="trainingPage" btn-radio="'Overview'">
                      Overview
                    </label>
                    <label class="btn btn-primary" ng-model="trainingPage" btn-radio="'Details'">
                      Details
                    </label>
                  </div>
                </div>
              </div>
              <div class="separator"></div>
              <div class="body training-overview">
                <div ng-show="trainingPage == 'Overview'">
                  <div class="row property">
                    <div class="col-xs-5 col-sm-4 title">Date</div>
                    <div class="col-xs-7 col-sm-4 value">{{selectedTraining.start_time | date: 'd.M.yyyy'}}
                    </div>
                  </div>
                  <div class="row property">
                    <div class="col-xs-5 col-sm-4 title">Start time</div>
                    <div class="col-xs-7 col-sm-4 value">{{selectedTraining.start_time | date: 'HH:mm'}}
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12">
                      <div class="tabular-section panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">Durations</h3>
                        </div>

                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-4 property">
                              <div class="title">Total</div>
                              <div><span tooltip="Total duration of the training (in minutes).">{{durationInMinutes | number:0}} min</span>
                              </div>
                            </div>
                            <div class="col-xs-4 property">
                              <div class="title">Rest</div>
                              <div><span tooltip="Total duration of rest (in minutes).">{{totalRestInMinutes | number:0}} min</span>
                              </div>
                            </div>
                            <div class="col-xs-4 property">
                              <div class="title">Exercise</div>
                              <div><span tooltip="Total duration of exercising (in minutes).">{{totalExercisesInMinutes | number:0}} min</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12">
                      <div class="tabular-section panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">Activities</h3>
                        </div>

                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-4 property">
                              <div class="title">Exercises</div>
                              <div><span tooltip="Number of exercises performed.">{{numExercisesPerformed}} of {{numExercisesPlanned}}</span>
                              </div>
                            </div>
                            <div class="col-xs-4 property">
                              <div class="title">Series</div>
                              <div><span
                                tooltip="Number of series performed.">{{performedSeries}} of {{totalSeries}}</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12">
                      <div class="tabular-section panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">Changes</h3>
                        </div>

                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-4 property">
                              <div class="title">Rest</div>
                              <div><span tooltip="Average rest difference based on planned rest.">{{averageRestDifferenceInSec | number:0}} s</span>
                              </div>
                            </div>
                            <div class="col-xs-4 property">
                              <div class="title">Weight</div>
                              <div><span
                                tooltip="Number of weight changes.">{{numberWeightChanges}}</span> (<span
                                tooltip="Average weight change.">{{averageWeightChanges}} kg</span>)
                              </div>
                            </div>
                            <div class="col-xs-4 property">
                              <div class="title">Reps</div>
                              <div><span
                                tooltip="Number of repetition changes.">{{numberRepsChanges}}</span>
                                (<span tooltip="Average repetition change.">{{averageRepsChanges}}</span>)
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12">
                      <div class="tabular-section panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">Series intensity</h3>
                        </div>

                        <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-4 property">
                              <div class="title">Too easy</div>
                              <div>
                                <span tooltip="Number of series rated too easy.">{{numSeriesTooEasy}}</span>
                              </div>
                            </div>
                            <div class="col-xs-4 property">
                              <div class="title">Too hard</div>
                              <div>
                                <span tooltip="Number of series rated too hard.">{{numSeriesTooHeavy}}</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12">
                      <div class="panel panel-default">
                        <div class="panel-heading">
                          <h3 class="panel-title">Comment</h3>
                        </div>

                        <div class="panel-body">
                          <div>
                            {{selectedTraining.comment}}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div ng-show="trainingPage == 'Details'">
                  <div ng-repeat="exercise in selectedTraining.training.exercises">
                    <div class="row">
                      <div class="col-sm-12 section-title">{{exercise.exercise_type.name}}</div>
                    </div>

                    <div class="row" ng-repeat="series in exercise.series">
                      <div class="col-sm-1 property">
                        <div class="title" ng-show="series.execution">
                          <div>
                            #{{series.execution.order}}
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-2">
                        <div class="title">
                          <div class="series-rating {{smileLookup[series.execution.rating] + '-on'}}"></div>
                        </div>
                      </div>
                      <div ng-show="series.execution">
                        <div class="col-sm-3 property">
                          <gh-visualization class="chart-label"
                                            label="series.execution.rest_time + ' s'"
                                            tooltip="Rest: {{series.execution.rest_time}} of {{series.rest_time}} s"
                                            expected="series.rest_time"
                                            actual="series.execution.rest_time"
                                            ng-hide="{{series.execution.order == 1}}"
                                            rest="true"></gh-visualization>
                        </div>
                        <div class="col-sm-3 property" ng-show="isDurationExercise(exercise)">
                          <gh-visualization class="chart-label"
                                            label="series.execution.duration_seconds + ' sec'"
                                            tooltip="Duration: {{series.execution.duration_seconds}} of {{series.repeat_count}} seconds."
                                            expected="series.repeat_count"
                                            actual="series.execution.duration_seconds"
                                            rest="false"></gh-visualization>
                        </div>
                        <div class="col-sm-3 property" ng-hide="isDurationExercise(exercise)">
                          <gh-visualization class="chart-label"
                                            label="series.execution.num_repetitions + ' rep'"
                                            tooltip="Reps: {{series.execution.num_repetitions}} of {{series.repeat_count}}."
                                            expected="series.repeat_count"
                                            actual="series.execution.num_repetitions"
                                            rest="false"></gh-visualization>
                        </div>
                        <div class="col-sm-3 property">
                          <gh-visualization class="chart-label"
                                            label="series.execution.weight + ' kg'"
                                            tooltip="Weight: {{series.execution.weight}} of {{series.weight}} kg."
                                            expected="series.weight"
                                            actual="series.execution.weight"
                                            rest="false"></gh-visualization>
                        </div>
                      </div>
                      <div ng-hide="series.execution">
                        <div class="col-sm-offset-3 col-sm-3 property skipped">
                          SKIPPED
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>