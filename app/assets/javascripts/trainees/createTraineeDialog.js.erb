var createTraineeDialog = angular.module('trainees.createTraineeDialog', [
  'ui.bootstrap',
  'util.promiseSpinner',
  'users.createUserDialog',
  'trainees'
]);

createTraineeDialog.factory('CreateTraineeDialog', ['$modal', 'Trainee', 'CreateUserDialog', '$q', function ($modal, Trainee, CreateUserDialog, $q) {
  return function () {
    return CreateUserDialog({
      dialogTitle: 'New trainee',
      createUser: function () {
        return new Trainee();
      },
      saveUser: function (user, photo) {
        return $q(function (resolve, reject) {
          Trainee.create(user, photo)
            .then(function (response) {
              resolve(new Trainee(response.data));
            }, reject);
        });
      }
    });
  };
}]);