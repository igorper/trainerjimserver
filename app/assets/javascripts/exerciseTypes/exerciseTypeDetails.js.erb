var exerciseTypeDetailsModule = angular.module("exerciseTypes.exerciseTypeDetails", [
  'exerciseTypes.exerciseType',
  'users.exerciseTypes.photos'
]);

exerciseTypeDetailsModule.directive('exerciseTypeDetails', function () {
  return {
    restrict: 'E',
    scope: {
      'exerciseTypeId': '=',
      'userId': '='
    },
    controller: ['$scope', 'ExerciseType', 'UserExerciseTypePhotos', function ($scope, ExerciseType, UserExerciseTypePhotos) {
      $scope.exerciseType = ExerciseType.get({id: $scope.exerciseTypeId});
      $scope.userPhotos = UserExerciseTypePhotos.query({userId: $scope.userId, exerciseTypeId: $scope.exerciseTypeId});
    }],
    templateUrl: "<%= asset_path('exerciseTypes/exercise-type-details.html') %>"
  };
});


exerciseTypeDetailsModule.factory('ExerciseTypeDetailsDialog', ['$modal', function ($modal) {
  return function (exerciseTypeId) {
    return $modal.open({
      templateUrl: '<%= asset_path('exerciseTypes/exercise-type-details-dialog.html') %>',
      backdrop: 'static',
      windowClass: 'modal-window',
      size: 'lg',
      controller: ['$scope', 'ExerciseType', function ($scope, ExerciseType) {
          $scope.exerciseTypeId = exerciseTypeId;

          $scope.onCloseClicked = function () {
            $scope.$dismiss();
          };
        }
      ]
    });
  };
}]);